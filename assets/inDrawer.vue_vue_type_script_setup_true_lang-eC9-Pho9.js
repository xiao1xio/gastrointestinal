var w=(p,f,t)=>new Promise((_,s)=>{var b=u=>{try{o(t.next(u))}catch(d){s(d)}},m=u=>{try{o(t.throw(u))}catch(d){s(d)}},o=u=>u.done?_(u.value):Promise.resolve(u.value).then(b,m);o((t=t.apply(p,f)).next())});import{d as O,r as v,al as x,o as A,f as T,w as n,g as a,j as U,l as j,m as R,Q as S,k as V,_ as $,aS as K,n as L,B as z,S as E,T as F,K as G}from"./index-DxMZejvi.js";const J=O({__name:"inDrawer",props:{typeOptions:Array,specificationOptions:Array,reasonOptions:Array,visible:Boolean},emits:["update:visible","submit","cancel"],setup(p,{emit:f}){const t=v({batchNumber:"",type:null,name:"",manufacturer:"",inboundQuantity:"",specification:null,productionDate:null,expiryDate:null}),_=v(null),s=v(!1),b={batchNumber:{required:!0,message:"请输入制剂批号",trigger:"blur"},type:{required:!0,message:"请选择制剂类型",trigger:"change",type:"number"},name:{required:!0,message:"请输入制剂名称",trigger:"blur"},manufacturer:{required:!0,message:"请输入厂家",trigger:"blur"},inboundQuantity:{required:!0,message:"请输入出库总量",trigger:"blur"},specification:{required:!0,message:"请选择规格",trigger:"change",type:"number"},productionDate:{required:!0,message:"请选择生产日期",trigger:"change",type:"number"},expiryDate:{required:!0,message:"请选择过期日期",trigger:"change",type:"number"}},m=p,o=f,u=v(m.visible);x(()=>m.visible,i=>{u.value=i}),x(u,i=>{o("update:visible",i)});const d=()=>{u.value=!1,o("update:visible",!1),o("cancel")},q=()=>w(this,null,function*(){var i;(i=_.value)==null||i.validate(e=>{e?console.error("表单验证失败:",e):(s.value=!0,setTimeout(()=>{s.value=!1,u.value=!1,o("submit",t.value)},1e3))})});return(i,e)=>{const c=j,r=R,g=S,y=V,k=$,h=K,N=L,D=z,C=E,Q=F,B=G;return A(),T(B,{show:u.value,"onUpdate:show":e[8]||(e[8]=l=>u.value=l),width:"55%"},{default:n(()=>[a(Q,{title:"制剂入库",closable:""},{footer:n(()=>[a(C,{justify:"end"},{default:n(()=>[a(D,{onClick:d},{default:n(()=>e[9]||(e[9]=[U("取消")])),_:1}),a(D,{type:"primary",onClick:q,loading:s.value},{default:n(()=>e[10]||(e[10]=[U("确认")])),_:1},8,["loading"])]),_:1})]),default:n(()=>[a(N,{ref_key:"formRef",ref:_,model:t.value,rules:b,"label-placement":"top","label-width":"auto",class:"vertical-label-form"},{default:n(()=>[a(r,{label:"制剂批号",path:"batchNumber"},{default:n(()=>[a(c,{value:t.value.batchNumber,"onUpdate:value":e[0]||(e[0]=l=>t.value.batchNumber=l),placeholder:"请输入制剂批号"},null,8,["value"])]),_:1}),a(r,{label:"制剂类型",path:"type"},{default:n(()=>[a(g,{value:t.value.type,"onUpdate:value":e[1]||(e[1]=l=>t.value.type=l),options:p.typeOptions,placeholder:"请选择制剂类型"},null,8,["value","options"])]),_:1}),a(r,{label:"制剂名称",path:"name"},{default:n(()=>[a(c,{value:t.value.name,"onUpdate:value":e[2]||(e[2]=l=>t.value.name=l),placeholder:"请输入制剂名称"},null,8,["value"])]),_:1}),a(r,{label:"厂家",path:"manufacturer"},{default:n(()=>[a(c,{value:t.value.manufacturer,"onUpdate:value":e[3]||(e[3]=l=>t.value.manufacturer=l),placeholder:"请输入厂家"},null,8,["value"])]),_:1}),a(k,{cols:12,"x-gap":"12"},{default:n(()=>[a(y,{span:9},{default:n(()=>[a(r,{label:"入库总量",path:"inboundQuantity"},{default:n(()=>[a(c,{value:t.value.inboundQuantity,"onUpdate:value":e[4]||(e[4]=l=>t.value.inboundQuantity=l),placeholder:"请输入入库总量"},null,8,["value"])]),_:1})]),_:1}),a(y,{span:3},{default:n(()=>[a(r,{path:"specification"},{default:n(()=>[a(g,{value:t.value.specification,"onUpdate:value":e[5]||(e[5]=l=>t.value.specification=l),options:p.specificationOptions,placeholder:"规格"},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),a(r,{label:"生产日期",path:"productionDate"},{default:n(()=>[a(h,{value:t.value.productionDate,"onUpdate:value":e[6]||(e[6]=l=>t.value.productionDate=l),type:"date",clearable:"",placeholder:"请选择生产日期"},null,8,["value"])]),_:1}),a(r,{label:"过期日期",path:"expiryDate"},{default:n(()=>[a(h,{value:t.value.expiryDate,"onUpdate:value":e[7]||(e[7]=l=>t.value.expiryDate=l),type:"date",clearable:"",placeholder:"请选择过期日期"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}});export{J as _};
