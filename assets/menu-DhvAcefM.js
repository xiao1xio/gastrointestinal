var S=(z,C,d)=>new Promise((k,_)=>{var D=o=>{try{i(d.next(o))}catch(v){_(v)}},m=o=>{try{i(d.throw(o))}catch(v){_(v)}},i=o=>o.done?k(o.value):Promise.resolve(o.value).then(D,m);i((d=d.apply(z,C)).next())});import{d as ne,r as s,u as le,G as ae,H as oe,a as se,I as ue,ej as ie,o as T,y as j,h as f,g as e,w as t,j as p,i as r,a7 as U,f as B,v as pe,ek as R,t as re,N as de,B as _e,at as ce,S as fe,l as me,x as ve,el as ge,k as ye,aG as be,m as he,dF as ke,dG as xe,n as we,_ as Te}from"./index-DxMZejvi.js";import{_ as Ce}from"./CreateDrawer.vue_vue_type_script_setup_true_lang-BRI2TKWM.js";import{D as De}from"./DownOutlined-BTakhg3t.js";import{A as Me}from"./AlignLeftOutlined-CplxvjKD.js";import{S as Oe}from"./SearchOutlined-BIk5eOin.js";import{F as Ue}from"./FormOutlined-Cmu5kHGF.js";const ze={class:"n-layout-page-header"},Ie={class:"flex items-center"},Ke={class:"flex items-center"},Ne={class:"w-full menu"},Se={class:"py-3 menu-list"},je={key:0,class:"flex items-center justify-center py-4"},Fe=ne({__name:"menu",setup(z){const C={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},d=s(null),k=s(),_=le(),D=ae();let m=s([]),i=s([]);const o=s([]),v=s(!0),A=s(!1),M=s(!1),g=s(""),O=s(""),I=s(""),L=oe(()=>!m.value.length),V=s([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:L}]),a=se({type:1,label:"",subtitle:"",path:"",auth:"",openType:1});function $(l){I.value=l==="home"?"添加顶栏菜单":`添加子菜单：${g.value}`,E()}function E(){const{openDrawer:l}=k.value;l()}function F(l){if(l.length){const n=R(r(o),l[0]);m.value=l,g.value=n.label,Object.assign(a,n),M.value=!0}else M.value=!1,m.value=[],g.value=""}function G(){D.info({title:"提示",content:"您确定想删除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{_.success("删除成功")},onNegativeClick:()=>{_.error("已取消")}})}function q(){const l=R(r(o),m.value[0]);Object.assign(a,l)}function H(){d.value.validate(l=>{l?_.error("请填写完整信息"):_.error("抱歉，您没有该权限")})}function P(){i.value.length?i.value=[]:i.value=r(o).map(l=>l.key)}ue(()=>S(this,null,function*(){const l=yield ie(),n=l.list.map(y=>y.key);Object.assign(a,n),o.value=l.list,v.value=!1}));function J(l){i.value=l}return(l,n)=>{const y=re,x=de,b=_e,Q=ce,w=fe,h=me,W=ve,X=ge,K=ye,Y=be,c=he,N=ke,Z=xe,ee=we,te=Te;return T(),j("div",null,[f("div",ze,[e(y,{bordered:!1,title:"菜单权限管理"},{default:t(()=>n[6]||(n[6]=[p(" 页面数据为 Mock 示例数据，非真实数据。 ")])),_:1})]),e(te,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:t(()=>[e(K,{span:"1"},{default:t(()=>[e(y,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(w,null,{default:t(()=>[e(Q,{trigger:"hover",onSelect:$,options:V.value},{default:t(()=>[e(b,{type:"info",ghost:"","icon-placement":"right"},{icon:t(()=>[f("div",Ie,[e(x,{size:"14"},{default:t(()=>[e(r(De))]),_:1})])]),default:t(()=>[n[7]||(n[7]=p(" 添加菜单 "))]),_:1})]),_:1},8,["options"]),e(b,{type:"info",ghost:"","icon-placement":"left",onClick:P},{icon:t(()=>[f("div",Ke,[e(x,{size:"14"},{default:t(()=>[e(r(Me))]),_:1})])]),default:t(()=>[p(" 全部"+U(r(i).length?"收起":"展开")+" ",1)]),_:1})]),_:1})]),default:t(()=>[f("div",Ne,[e(h,{type:"input",value:O.value,"onUpdate:value":n[0]||(n[0]=u=>O.value=u),placeholder:"输入菜单名称搜索"},{suffix:t(()=>[e(x,{size:"18",class:"cursor-pointer"},{default:t(()=>[e(r(Oe))]),_:1})]),_:1},8,["value"]),f("div",Se,[v.value?(T(),j("div",je,[e(W,{size:"medium"})])):(T(),B(X,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:O.value,data:o.value,expandedKeys:r(i),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":F,"onUpdate:expandedKeys":J},null,8,["pattern","data","expandedKeys"]))])])]),_:1})]),_:1}),e(K,{span:"2"},{default:t(()=>[e(y,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(w,null,{default:t(()=>[e(x,{size:"18"},{default:t(()=>[e(r(Ue))]),_:1}),f("span",null,"编辑菜单"+U(g.value?`：${g.value}`:""),1)]),_:1})]),default:t(()=>[e(Y,{type:"info",closable:""},{default:t(()=>n[8]||(n[8]=[p(" 从菜单列表选择一项后，进行编辑")])),_:1}),M.value?(T(),B(ee,{key:0,model:a,rules:C,ref_key:"formRef",ref:d,"label-placement":"left","label-width":100,class:"py-4"},{default:t(()=>[e(c,{label:"类型",path:"type"},{default:t(()=>[f("span",null,U(a.type===1?"侧边栏菜单":""),1)]),_:1}),e(c,{label:"标题",path:"label"},{default:t(()=>[e(h,{placeholder:"请输入标题",value:a.label,"onUpdate:value":n[1]||(n[1]=u=>a.label=u)},null,8,["value"])]),_:1}),e(c,{label:"副标题",path:"subtitle"},{default:t(()=>[e(h,{placeholder:"请输入副标题",value:a.subtitle,"onUpdate:value":n[2]||(n[2]=u=>a.subtitle=u)},null,8,["value"])]),_:1}),e(c,{label:"路径",path:"path"},{default:t(()=>[e(h,{placeholder:"请输入路径",value:a.path,"onUpdate:value":n[3]||(n[3]=u=>a.path=u)},null,8,["value"])]),_:1}),e(c,{label:"打开方式",path:"openType"},{default:t(()=>[e(Z,{value:a.openType,"onUpdate:value":n[4]||(n[4]=u=>a.openType=u),name:"openType"},{default:t(()=>[e(w,null,{default:t(()=>[e(N,{value:1},{default:t(()=>n[9]||(n[9]=[p("当前窗口")])),_:1}),e(N,{value:2},{default:t(()=>n[10]||(n[10]=[p("新窗口")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),e(c,{label:"菜单权限",path:"auth"},{default:t(()=>[e(h,{placeholder:"请输入权限，多个权限用，分割",value:a.auth,"onUpdate:value":n[5]||(n[5]=u=>a.auth=u)},null,8,["value"])]),_:1}),e(c,{path:"auth",style:{"margin-left":"100px"}},{default:t(()=>[e(w,null,{default:t(()=>[e(b,{type:"primary",loading:A.value,onClick:H},{default:t(()=>n[11]||(n[11]=[p("保存修改")])),_:1},8,["loading"]),e(b,{onClick:q},{default:t(()=>n[12]||(n[12]=[p("重置")])),_:1}),e(b,{onClick:G},{default:t(()=>n[13]||(n[13]=[p("删除")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):pe("",!0)]),_:1})]),_:1})]),_:1}),e(Ce,{ref_key:"createDrawerRef",ref:k,title:I.value},null,8,["title"])])}}});export{Fe as default};
