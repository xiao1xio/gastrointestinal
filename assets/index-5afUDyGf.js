var C=(h,m,n)=>new Promise((l,f)=>{var a=o=>{try{u(n.next(o))}catch(r){f(r)}},g=o=>{try{u(n.throw(o))}catch(r){f(r)}},u=o=>o.done?l(o.value):Promise.resolve(o.value).then(a,g);u((n=n.apply(h,m)).next())});import{d as E,r as w,u as I,P,a as j,b as A,c as O,e as U,f as q,w as s,_ as z,o as L,g as e,h as d,i as N,j as M,R as V,k as G,N as D,l as T,m as Z,B as F,n as H,p as J,q as K,s as Q}from"./index-DxMZejvi.js";import{P as W,L as X}from"./PersonOutline-82sIcALb.js";const Y="/assets/logo-1-C761-Zd8.png",$={class:"w-3/5 relative",style:{height:"400px","min-width":"400px"}},ee=E({__name:"index",setup(h){const m=w(),n=I(),l=w(!1);w(!0);const f=P.BASE_LOGIN_NAME,a=j({username:"admin",password:"123456",isCaptcha:!0}),g={username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}},u=A(),o=O(),r=U(),R=k=>{k.preventDefault(),m.value.validate(t=>C(this,null,function*(){var c;if(t)n.error("请填写完整信息，并且进行验证码校验");else{const{username:i,password:_}=a;if(l.value=!0,i==="admin"&&_==="123456"){const p={username:i,password:_};try{const{code:x,message:v}=yield u.login(p);if(n.destroyAll(),x==V.SUCCESS){const y=decodeURIComponent(((c=r.query)==null?void 0:c.redirect)||"/");n.success("登录成功，即将进入系统"),r.name===f?o.replace("/"):o.replace(y)}else n.info(v||"登录失败")}finally{l.value=!1}}else n.destroyAll(),n.error("账号或密码错误"),l.value=!1}}))};return(k,t)=>{const c=G,i=D,_=T,p=Z,x=F,v=H,y=J,S=K,B=z;return L(),q(B,{cols:"24"},{default:s(()=>[e(c,{span:"15",style:{background:"#eef1f7"},class:"h-screen flex flex-col justify-center items-center"},{default:s(()=>t[2]||(t[2]=[d("div",{class:"relative flex flex-col justify-center items-center",style:{background:"#eef1f7",width:"66%","min-width":"660px"}},[d("div",{style:{color:"#040c23",top:"-66px"},class:"font-bold w-full absolute text-5xl"}," 智愈肠胃——减重代谢全周期管理系统 "),d("img",{width:"100%",height:"100%",src:Y,alt:""})],-1)])),_:1}),e(c,{span:"9",class:"h-screen flex flex-col justify-center items-center"},{default:s(()=>[d("div",$,[t[4]||(t[4]=d("div",{style:{color:"#040c23",top:"-110px"},class:"font-bold absolute text-4xl"}," 欢迎登录！ ",-1)),e(S,{animated:"","default-value":"signin","justify-content":"center"},{default:s(()=>[e(y,{name:"signin",tab:"密码登录"},{default:s(()=>[e(v,{ref_key:"formRef",ref:m,"label-placement":"left",size:"large",model:a,rules:g},{default:s(()=>[e(p,{path:"username",label:"手机号/账号",class:"form-item-break"},{default:s(()=>[e(_,{value:a.username,"onUpdate:value":t[0]||(t[0]=b=>a.username=b),style:{width:"400px"},placeholder:"请输入用户名"},{prefix:s(()=>[e(i,{size:"18",color:"#808695"},{default:s(()=>[e(N(W))]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{path:"password",label:"密码",class:"form-item-break"},{default:s(()=>[e(_,{value:a.password,"onUpdate:value":t[1]||(t[1]=b=>a.password=b),style:{width:"400px"},type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:s(()=>[e(i,{size:"18",color:"#808695"},{default:s(()=>[e(N(X))]),_:1})]),_:1},8,["value"])]),_:1}),e(p,null,{default:s(()=>[e(x,{type:"primary",onClick:R,size:"large",loading:l.value,block:""},{default:s(()=>t[3]||(t[3]=[M(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])]),_:1})]),_:1})}}}),oe=Q(ee,[["__scopeId","data-v-5f015afc"]]);export{oe as default};
